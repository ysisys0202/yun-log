---
title: infer 알아보기
intro: ""
isFeatured: true
createdAt: "2024-12-1"
thumbnail : "https://drive.google.com/uc?export=view&id=159jGroEmKvVBVvLL9C77eprzuvnbccBn"
keywords: "타입스크립트, typescript, ts, 제네릭, generic, type, infer "
---
<p>{intro}</p>
<Spacing size="lg" />
## 타입스크립트에서 infer란?
<br/>
infer는 "추론하다"라는 의미로 타입스크립트에서는 extends를 통한 조건부 타입에서 조건이 true 일 때 구체적인 타입을 지정하지 않고 제네릭 타입을 통해 타입을 추론할 수 있는 키워드입니다. 코드를 보며 자세히 살펴보겠습니다.
<br/>
```typescript
type Flatten<Type> = Type extends Array<infer Item> ? Item : Type;
```
<br/>
Flatten 타입을 보면 infer Item은 타입 Flatten의 제네릭 타입이 배열일 때 배열의 원소의 타입으로 추론됩니다. 여기서 중요한 점 3가지를 정리해보겠습니다.
<br/>
1. infer는 extends를 사용하여 조건부로 타입을 지정할 때 사용됩니다.
2. 조건이 true인 경우에만 infer를 사용해 추론한 타입을 사용할 수 있습니다. 조건이 false라면 타입이 Array를 제외한 모든 타입이 되는 것이니 타입을 추론할 수가 없기 때문일 것입니다.
3. 제네릭과 infer는 이를테면 y = f(x)의 관계이며, y가 x 값에 영향을 받아 값이 결정되듯이 infer 역시 제네릭에 영향을 받아 추론되는 타입입니다. 
<br/>
즉 infer는 제네릭에 의해 추론되는 하나의 타입이며, 제네릭이 어떠한 조건을 만족할 때 (특정 타입의 서브타입일때) 사용할 수 있습니다. 선언 시점에 구체적인 타입을 지정하지않고 타입 사용 시점에 제네릭에 의해 구체적인 타입이 추론되다는 점에서 타입의 확장성이 향상됩니다.
<br/>
사실 저는 infer를 보았을 떄 한번에 이해하기가 쉽지 않았습니다. 그래서 계속 infer란 키워드는 왜, 어떤 상황에서 쓰이는 걸까 곰곰히 생각하다가 문득 제네릭과 infer의 관계에 대해 떠올리게 되었습니다. 3번에서 이야기한 y = f(x)와 비슷한 관계라고 생각하니 왜 infer를 사용하는지 감이 잡히고 이해가 되기 시작했습니다.
<br/>
## infer 사용 예제 더 살펴보기
<br/>
infer가 무엇인지 알아보았으니 infer가 어떤 상황에서 유용하게 사용될 수 있는지 알아보겠습니다.
<br/>
### 재귀적으로 타입 추론하기
<br/>
앞서 살펴본 Flatten 타입을 재귀적으로 사용하여 다중 배열 원소의 타입을 알아볼 수 있는 DeppFlatten 타입입니다.
<br/>
```typescript
type DeepFlatten<Type> = Type extends Array<infer Item> ? DeepFlatten<Item> : Type;

// 사용 예시
type NestedArray = number[][][]; // 3단계 중첩 배열
type FlatNestedArray = DeepFlatten<NestedArray>; 
```
<br/>
Type이 Array의 서브타입일 때 Array의 원소 타입을 다시 DeepFlatten 타입으로 넘겨 최종적으로 Type이 Array가 아니게
<br/>
### 함수의 리턴 값 추론하기
<br/>
```typescript
type ReturnType<T extends (...args: any) => any> = T extends (...args: any) => 
infer R ? R : any;

type Num = GetReturnType<() => number>;
     
type Num = number
 
type Str = GetReturnType<(x: string) => string>;
     
type Str = string
 
type Bools = GetReturnType<(a: boolean, b: boolean) => boolean[]>;
 
```
<br/>
## 포스팅을 마무리하며
<br/>
